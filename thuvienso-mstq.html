<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>ƒêang chuy·ªÉn h∆∞·ªõng ƒë·∫øn PWA...</title>
  <link rel="dns-prefetch" href="//thiensutinhquang.github.io">
  <link rel="preconnect" href="https://thiensutinhquang.github.io">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Inter', sans-serif; }

    /* Custom Animations for Button and Box */
    .gradient-button {
      background: linear-gradient(135deg, #4285F4 0%, #34A853 100%);
      box-shadow: 0 5px 15px rgba(66, 133, 244, 0.4);
    }
    .gradient-button:hover {
      box-shadow: 0 8px 20px rgba(66, 133, 244, 0.6);
    }

    /* Pulse effect for the main container */
    @keyframes subtlePulse {
      0%, 100% {
        transform: translateY(0) scale(1);
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }
      50% {
        transform: translateY(-5px) scale(1.01);
        box-shadow: 0 15px 35px -5px rgba(0, 0, 0, 0.15), 0 6px 10px -3px rgba(0, 0, 0, 0.08);
      }
    }
    .animate-subtle-pulse {
      animation: subtlePulse 3s infinite ease-in-out;
    }

    /* Modal Transition */
    .modal-enter-active, .modal-leave-active {
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    .modal-enter-from, .modal-leave-to {
      opacity: 0;
      transform: scale(0.95);
    }
    .modal-enter-to, .modal-leave-from {
      opacity: 1;
      transform: scale(1);
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-500 to-green-500 flex items-center justify-center min-h-screen relative overflow-hidden text-gray-800">
  <canvas id="backgroundCanvas" class="absolute inset-0 z-0"></canvas>

  <div class="bg-white p-8 rounded-2xl shadow-xl text-center max-w-sm w-full mx-4 relative z-10 animate-subtle-pulse">
    <div class="text-6xl mb-4" role="img" aria-label="Warning Icon">‚ö†Ô∏è</div>
    <h1 class="text-3xl font-extrabold mb-3 text-gray-800">M·ªü b·∫±ng tr√¨nh duy·ªát m·∫∑c ƒë·ªãnh</h1>
    <p class="text-gray-700 mb-6 leading-relaxed">
      ƒê·ªÉ c√≥ tr·∫£i nghi·ªám t·ªët nh·∫•t v√† s·ª≠ d·ª•ng ƒë·∫ßy ƒë·ªß c√°c t√≠nh nƒÉng c·ªßa ·ª©ng d·ª•ng, vui l√≤ng nh·∫•n n√∫t b√™n d∆∞·ªõi ƒë·ªÉ ti·∫øp t·ª•c.
    </p>
    <button id="openExternalBrowser" class="w-full text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 ease-in-out transform hover:scale-105 gradient-button relative overflow-hidden flex items-center justify-center">
      <span id="buttonText">M·ªû TRONG TR√åNH DUY·ªÜT</span>
      <span id="loadingSpinner" class="absolute inset-0 flex items-center justify-center bg-white bg-opacity-20 hidden">
        <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
      </span>
    </button>
    <p class="text-gray-500 text-sm mt-4">·ª®ng d·ª•ng ho·∫°t ƒë·ªông t·ªët nh·∫•t tr√™n Chrome, Safari, Firefox, C·ªëc C·ªëc...</p>
  </div>

  <div id="infoModalOverlay" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 hidden">
    <div id="infoModalContent" class="bg-white rounded-2xl shadow-2xl p-7 max-w-md w-full text-center transition-all duration-300 modal-enter-from">
      <h2 class="text-2xl font-bold mb-4 text-gray-800">üí° T·∫°i sao c·∫ßn m·ªü b·∫±ng tr√¨nh duy·ªát?</h2>
      <p class="text-gray-700 mb-5 text-left leading-relaxed">
        Trang web n√†y l√† m·ªôt <strong class="text-blue-600">·ª©ng d·ª•ng web ti·∫øn b·ªô (PWA)</strong> ƒë∆∞·ª£c t·ªëi ∆∞u h√≥a cho tr√¨nh duy·ªát.
        Khi b·∫°n m·ªü li√™n k·∫øt n√†y t·ª´ c√°c ·ª©ng d·ª•ng m·∫°ng x√£ h·ªôi (nh∆∞ Zalo, Facebook, Messenger, Telegram...),
        ch√∫ng th∆∞·ªùng s·ª≠ d·ª•ng m·ªôt tr√¨nh duy·ªát nh√∫ng c√≥ th·ªÉ h·∫°n ch·∫ø hi·ªáu su·∫•t ho·∫∑c m·ªôt s·ªë t√≠nh nƒÉng.
      </p>
      <p class="text-gray-700 mb-6 text-left leading-relaxed font-semibold">
        ƒê·ªÉ ƒë·∫£m b·∫£o tr·∫£i nghi·ªám ƒë·∫ßy ƒë·ªß, m∆∞·ª£t m√† v√† an to√†n nh·∫•t, vui l√≤ng nh·∫•n n√∫t "M·ªü trong tr√¨nh duy·ªát" ·ªü trang tr∆∞·ªõc.
      </p>
      <button id="closeInfoModal" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors duration-200">
        ƒê√£ hi·ªÉu, ƒë√≥ng th√¥ng b√°o
      </button>
    </div>
  </div>

  <script>
  (function(){
    // === PH·∫¶N QUAN TR·ªåNG: X·ª¨ L√ù LINK ƒê√çCH ===
    // ƒê√£ c·∫≠p nh·∫≠t baseAppURL theo y√™u c·∫ßu
    const baseAppURL = 'https://thiensutinhquang.github.io/home/'; 
    
    const params = new URLSearchParams(window.location.search);
    const videoId = params.get('v'); // Gi·ªØ l·∫°i ƒë·ªÉ t∆∞∆°ng th√≠ch ng∆∞·ª£c n·∫øu c·∫ßn
    const videoTime = params.get('t'); // Gi·ªØ l·∫°i ƒë·ªÉ t∆∞∆°ng th√≠ch ng∆∞·ª£c n·∫øu c·∫ßn

    let targetURL = baseAppURL;
    // B·∫°n c√≥ th·ªÉ t√πy ch·ªânh logic n√†y n·∫øu mu·ªën c√°c tham s·ªë 'v' v√† 't' ·∫£nh h∆∞·ªüng ƒë·∫øn trang 'home'
    // V√≠ d·ª•: n·∫øu 'home' c≈©ng c√≥ th·ªÉ x·ª≠ l√Ω c√°c tham s·ªë video
    if (videoId) {
      targetURL += `?v=${videoId}`;
      if (videoTime) {
        targetURL += `&t=${videoTime}`;
      }
    }
    
    // === PH·∫¶N PH√ÅT HI·ªÜN V√Ä CHUY·ªÇN H∆Ø·ªöNG ===
    const ua           = navigator.userAgent || '';
    const isAndroid    = /Android/i.test(ua);
    const isIOS        = /iPhone|iPad|iPod/i.test(ua);
    const inAppKeywords = ['FBAV', 'FBAN', 'Zalo', 'Messenger', 'Telegram', 'Viber', 'Line', 'Snapchat', 'WeChat', 'Instagram'];
    const isInApp       = inAppKeywords.some(keyword => ua.includes(keyword));

    const openExternalBrowserButton = document.getElementById('openExternalBrowser');
    const buttonText = document.getElementById('buttonText');
    const loadingSpinner = document.getElementById('loadingSpinner');
    const infoModalOverlay = document.getElementById('infoModalOverlay');
    const infoModalContent = document.getElementById('infoModalContent');
    const closeInfoModalButton = document.getElementById('closeInfoModal');

    // T·ª± ƒë·ªông hi·ªÉn th·ªã modal n·∫øu ƒëang trong ·ª©ng d·ª•ng v√† ch∆∞a t·ª´ng th·∫•y
    // B·∫≠t l√™n b·∫±ng c√°ch b·ªè comment ƒëo·∫°n code d∆∞·ªõi ƒë√¢y n·∫øu b·∫°n mu·ªën n√≥ t·ª± ƒë·ªông hi·ªán ra
    /*
    if (isInApp && !localStorage.getItem('modalSeen')) {
      infoModalOverlay.classList.remove('hidden');
      setTimeout(() => {
        infoModalContent.classList.remove('modal-enter-from');
        infoModalContent.classList.add('modal-enter-to');
      }, 10);
      localStorage.setItem('modalSeen', 'true');
    }
    */

    closeInfoModalButton.addEventListener('click', () => {
      infoModalContent.classList.remove('modal-enter-to');
      infoModalContent.classList.add('modal-leave-to');
      setTimeout(() => {
        infoModalOverlay.classList.add('hidden');
        infoModalContent.classList.remove('modal-leave-to'); // Reset cho l·∫ßn sau
        infoModalContent.classList.add('modal-enter-from'); // Reset tr·∫°ng th√°i ban ƒë·∫ßu
      }, 300); // ƒê·ª£i transition ho√†n t·∫•t
    });

    if (!isInApp) {
      window.location.replace(targetURL);
      return;
    }
    
    function tryOpenInAndroid(packages) {
      let i = 0;
      const attemptNext = () => {
        if (i >= packages.length) {
          // Fallback ƒë·∫øn Play Store n·∫øu t·∫•t c·∫£ c√°c intent ƒë·ªÅu th·∫•t b·∫°i
          window.location.href = 'https://play.google.com/store/apps/details?id=com.android.chrome';
          return;
        }
        const pkg = packages[i++];
        const intent = `intent:${targetURL.replace(/^https?:\/\//, '')}` +
                       `#Intent;scheme=https;` +
                       `package=${pkg};` +
                       `S.browser_fallback_url=${encodeURIComponent(targetURL)};end`;
        window.location.href = intent;
        setTimeout(attemptNext, 1200); // ƒê·ª£i tr√¨nh duy·ªát ph·∫£n h·ªìi
      };
      attemptNext();
    }

    function tryOpenInIOS(schemes, appStoreLink) {
      let i = 0;
      const attemptNext = () => {
        if (i >= schemes.length) {
          // Fallback ƒë·∫øn App Store n·∫øu t·∫•t c·∫£ c√°c scheme ƒë·ªÅu th·∫•t b·∫°i
          window.location.href = appStoreLink;
          return;
        }
        const scheme = schemes[i++];
        const url = targetURL.replace(/^https?:\/\//, scheme + '://');
        window.location.href = url;
        setTimeout(attemptNext, 1200); // ƒê·ª£i tr√¨nh duy·ªát ph·∫£n h·ªìi
      };
      attemptNext();
    }

    openExternalBrowserButton.addEventListener('click', () => {
      buttonText.classList.add('hidden');
      loadingSpinner.classList.remove('hidden');

      const androidPackages = ['com.android.chrome', 'org.mozilla.firefox', 'com.coccoc.browser', 'com.brave.browser', 'com.microsoft.emmx'];
      const iosSchemes = ['googlechromes', 'googlechrome', 'firefox', 'brave', 'microsoft-edge'];

      if (isAndroid) {
        tryOpenInAndroid(androidPackages);
      } else if (isIOS) {
        tryOpenInIOS(iosSchemes, 'itms-apps://itunes.apple.com/app/id535886823'); // Chrome tr√™n App Store
      } else {
        // ƒê·ªëi v·ªõi tr√¨nh duy·ªát m√°y t√≠nh ho·∫∑c n·ªÅn t·∫£ng kh√°c, m·ªü trong tab m·ªõi
        window.open(targetURL, '_blank');
      }

      // K√≠ch ho·∫°t l·∫°i n√∫t v√† ·∫©n spinner sau m·ªôt th·ªùi gian, ƒë·ªÅ ph√≤ng tr∆∞·ªùng h·ª£p chuy·ªÉn h∆∞·ªõng th·∫•t b·∫°i/b·ªã h·ªßy
      setTimeout(() => {
        buttonText.classList.remove('hidden');
        loadingSpinner.classList.add('hidden');
      }, 5000); // 5 gi√¢y
    });

    // --- Canvas Background Animation (t√πy ch·ªçn, x√≥a n·∫øu kh√¥ng mu·ªën s·ª≠ d·ª•ng) ---
    const canvas = document.getElementById('backgroundCanvas');
    if (canvas) { // Ki·ªÉm tra xem ph·∫ßn t·ª≠ canvas c√≥ t·ªìn t·∫°i kh√¥ng
      const ctx = canvas.getContext('2d');
      let particles = [];

      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }

      class Particle {
        constructor(x, y, size, speedX, speedY, color) {
          this.x = x;
          this.y = y;
          this.size = size;
          this.speedX = speedX;
          this.speedY = speedY;
          this.color = color;
          this.initialY = y;
        }
        update() {
          this.x += this.speedX;
          this.y += this.speedY;

          // ƒê∆°n gi·∫£n l√† n·∫£y ra kh·ªèi c·∫°nh tr√™n/d∆∞·ªõi
          if (this.y + this.size > canvas.height || this.y - this.size < 0) {
            this.speedY *= -1;
          }
          if (this.x + this.size > canvas.width || this.x - this.size < 0) {
            this.speedX *= -1;
          }
        }
        draw() {
          ctx.fillStyle = this.color;
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          ctx.fill();
        }
      }

      function initParticles() {
        particles = [];
        const colors = ['rgba(255, 255, 255, 0.2)', 'rgba(255, 255, 255, 0.3)', 'rgba(255, 255, 255, 0.1)'];
        for (let i = 0; i < 50; i++) { // S·ªë l∆∞·ª£ng h·∫°t
          const size = Math.random() * 5 + 2;
          const x = Math.random() * canvas.width;
          const y = Math.random() * canvas.height;
          const speedX = (Math.random() * 0.4 - 0.2); // Di chuy·ªÉn ngang ch·∫≠m
          const speedY = (Math.random() * 0.4 - 0.2); // Di chuy·ªÉn d·ªçc ch·∫≠m
          const color = colors[Math.floor(Math.random() * colors.length)];
          particles.push(new Particle(x, y, size, speedX, speedY, color));
        }
      }

      function animateParticles() {
        requestAnimationFrame(animateParticles);
        ctx.clearRect(0, 0, canvas.width, canvas.height); // X√≥a ch·ªâ nh·ªØng g√¨ ƒë∆∞·ª£c v·∫Ω
        for (let i = 0; i < particles.length; i++) {
          particles[i].update();
          particles[i].draw();
        }
      }

      window.addEventListener('resize', () => {
        resizeCanvas();
        initParticles();
      });

      resizeCanvas();
      initParticles();
      animateParticles();
    }
  })();
  </script>
</body>
</html>
